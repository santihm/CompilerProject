<ProgramOp>
    <DeclsOp>
        <DefDeclOp>
            identifier: stampa
            string
            <ParDeclOp>
                <PVarOp>
                    identifier: stringa
                </PVarOp>
                string
            </ParDeclOp>
            <BodyOp>
                <ReturnOp>
                    <AddOp>
                        <TermOp>
                            string_const: "Ciao! "
                        </TermOp>
                        <TermOp>
                            identifier: stringa
                        </TermOp>
                    </AddOp>
                </ReturnOp>
            </BodyOp>
        </DefDeclOp>
        <DefDeclOp>
            identifier: somma
            void
            <ParDeclOp>
                <PVarOp>
                    identifier: input1
                </PVarOp>
                double
            </ParDeclOp>
            <ParDeclOp>
                <PVarOp>
                    identifier: input2
                </PVarOp>
                double
            </ParDeclOp>
            <ParDeclOp>
                <PVarOp>
                    identifier: result
                </PVarOp>
                double
            </ParDeclOp>
            <BodyOp>
                <AssignOp>
                    identifier: result
                    <AddOp>
                        <TermOp>
                            identifier: input1
                        </TermOp>
                        <TermOp>
                            identifier: input2
                        </TermOp>
                    </AddOp>
                </AssignOp>
            </BodyOp>
        </DefDeclOp>
        <DefDeclOp>
            identifier: divisione
            double
            <ParDeclOp>
                <PVarOp>
                    identifier: input1
                </PVarOp>
                double
            </ParDeclOp>
            <ParDeclOp>
                <PVarOp>
                    identifier: input2
                </PVarOp>
                double
            </ParDeclOp>
            <BodyOp>
                <IfThenOp>
                    <EQOp>
                        <TermOp>
                            identifier: input2
                        </TermOp>
                        <TermOp>
                            int_const: 0
                        </TermOp>
                    </EQOp>
                    <BodyOp>
                        <WriteOp>
                            <TermOp>
                                string_const: "Errore: divisione per zero"
                            </TermOp>
                        </WriteOp>
                        <ReturnOp>
                            <TermOp>
                                double_const: 0.0
                            </TermOp>
                        </ReturnOp>
                    </BodyOp>
                </IfThenOp>
                <ReturnOp>
                    <TermOp>
                        identifier: input1
                        <DivOp>
                            identifier: input2
                        </DivOp>
                    </TermOp>
                </ReturnOp>
            </BodyOp>
        </DefDeclOp>
        <DefDeclOp>
            identifier: moltiplicazione
            double
            <ParDeclOp>
                <PVarOp>
                    identifier: input1
                </PVarOp>
                double
            </ParDeclOp>
            <ParDeclOp>
                <PVarOp>
                    identifier: input2
                </PVarOp>
                double
            </ParDeclOp>
            <BodyOp>
                <ReturnOp>
                    <TermOp>
                        identifier: input1
                        <MulOp>
                            identifier: input2
                            Next TermTailOp null
                        </MulOp>
                    </TermOp>
                </ReturnOp>
            </BodyOp>
        </DefDeclOp>
        <DefDeclOp>
            identifier: sottrazione
            void
            <ParDeclOp>
                <PVarOp>
                    identifier: input1
                </PVarOp>
                double
            </ParDeclOp>
            <ParDeclOp>
                <PVarOp>
                    identifier: input2
                </PVarOp>
                double
            </ParDeclOp>
            <ParDeclOp>
                <PVarOp>
                    identifier: result
                </PVarOp>
                double
            </ParDeclOp>
            <BodyOp>
                <AssignOp>
                    identifier: result
                    <DiffOp>
                        <TermOp>
                            identifier: input1
                        </TermOp>
                        <TermOp>
                            identifier: input2
                        </TermOp>
                    </DiffOp>
                </AssignOp>
            </BodyOp>
        </DefDeclOp>
        <DefDeclOp>
            identifier: tutteleoperazioni
            void
            <ParDeclOp>
                <PVarOp>
                    identifier: input1
                </PVarOp>
                double
            </ParDeclOp>
            <ParDeclOp>
                <PVarOp>
                    identifier: input2
                </PVarOp>
                double
            </ParDeclOp>
            <ParDeclOp>
                <PVarOp>
                    identifier: res1
                </PVarOp>
                double
            </ParDeclOp>
            <ParDeclOp>
                <PVarOp>
                    identifier: res2
                </PVarOp>
                double
            </ParDeclOp>
            <ParDeclOp>
                <PVarOp>
                    identifier: res3
                </PVarOp>
                double
            </ParDeclOp>
            <ParDeclOp>
                <PVarOp>
                    identifier: res4
                </PVarOp>
                double
            </ParDeclOp>
            <BodyOp>
                <CallOp>
                    identifier: somma
                    <TermOp>
                        identifier: input1
                    </TermOp>
                    <TermOp>
                        identifier: input2
                    </TermOp>
                    <TermOp>
                        identifier: res1
                    </TermOp>
                </CallOp>
                <CallOp>
                    identifier: sottrazione
                    <TermOp>
                        identifier: input1
                    </TermOp>
                    <TermOp>
                        identifier: input2
                    </TermOp>
                    <TermOp>
                        identifier: res2
                    </TermOp>
                </CallOp>
                <AssignOp>
                    identifier: res4
                    <TermOp>
                        <CallOp>
                            identifier: divisione
                            <TermOp>
                                identifier: input1
                            </TermOp>
                            <TermOp>
                                identifier: input2
                            </TermOp>
                        </CallOp>
                    </TermOp>
                </AssignOp>
                <AssignOp>
                    identifier: res3
                    <TermOp>
                        <CallOp>
                            identifier: moltiplicazione
                            <TermOp>
                                identifier: input1
                            </TermOp>
                            <TermOp>
                                identifier: input2
                            </TermOp>
                        </CallOp>
                    </TermOp>
                </AssignOp>
            </BodyOp>
        </DefDeclOp>
        <VarDeclOp>
            <VarOptInitOp>
                identifier: flag
            </VarOptInitOp>
            bool
        </VarDeclOp>
        <VarDeclOp>
            <VarOptInitOp>
                identifier: input1
            </VarOptInitOp>
            <VarOptInitOp>
                identifier: input2
            </VarOptInitOp>
            <VarOptInitOp>
                identifier: answer
            </VarOptInitOp>
            <VarOptInitOp>
                identifier: result
            </VarOptInitOp>
            <VarOptInitOp>
                identifier: res1
            </VarOptInitOp>
            <VarOptInitOp>
                identifier: res2
            </VarOptInitOp>
            <VarOptInitOp>
                identifier: res3
            </VarOptInitOp>
            <VarOptInitOp>
                identifier: res4
            </VarOptInitOp>
            double
        </VarDeclOp>
        <VarDeclOp>
            <VarOptInitOp>
                identifier: operazione
            </VarOptInitOp>
            string
        </VarDeclOp>
    </DeclsOp>
    <BeginEndOp>
        <AssignOp>
            identifier: flag
            <TermOp>
                true
            </TermOp>
        </AssignOp>
        <WhileOp>
            <TermOp>
                identifier: flag
            </TermOp>
            <BodyOp>
                <WriteOp>
                    <TermOp>
                        string_const: "Inserisci l'operazione da effettuare (somma, sottrazione, divisione, moltiplicazione, tutteleoperazioni): "
                    </TermOp>
                </WriteOp>
                <ReadOp>
                    identifier: operazione
                </ReadOp>
                <WriteOp>
                    <TermOp>
                        string_const: "Inserisci il primo input: "
                    </TermOp>
                </WriteOp>
                <ReadOp>
                    identifier: input1
                </ReadOp>
                <WriteOp>
                    <TermOp>
                        string_const: "Inserisci il secondo input: "
                    </TermOp>
                </WriteOp>
                <ReadOp>
                    identifier: input2
                </ReadOp>
                <WriteOp>
                    <TermOp>
                        string_const: "Hai scelto l'operazione "
                    </TermOp>
                    <TermOp>
                        identifier: operazione
                    </TermOp>
                    <TermOp>
                        string_const: " con gli argomenti "
                    </TermOp>
                    <TermOp>
                        identifier: input1
                    </TermOp>
                    <TermOp>
                        string_const: " e "
                    </TermOp>
                    <TermOp>
                        identifier: input2
                    </TermOp>
                </WriteOp>
                <IfThenElseOp>
                    <EQOp>
                        <TermOp>
                            identifier: operazione
                        </TermOp>
                        <TermOp>
                            string_const: "somma"
                        </TermOp>
                    </EQOp>
                    <BodyOp>
                        <CallOp>
                            identifier: somma
                            <TermOp>
                                identifier: input1
                            </TermOp>
                            <TermOp>
                                identifier: input2
                            </TermOp>
                            <TermOp>
                                identifier: result
                            </TermOp>
                        </CallOp>
                    </BodyOp>
                    <BodyOp>
                        <IfThenElseOp>
                            <EQOp>
                                <TermOp>
                                    identifier: operazione
                                </TermOp>
                                <TermOp>
                                    string_const: "sottrazione"
                                </TermOp>
                            </EQOp>
                            <BodyOp>
                                <CallOp>
                                    identifier: sottrazione
                                    <TermOp>
                                        identifier: input1
                                    </TermOp>
                                    <TermOp>
                                        identifier: input2
                                    </TermOp>
                                    <TermOp>
                                        identifier: result
                                    </TermOp>
                                </CallOp>
                            </BodyOp>
                            <BodyOp>
                                <IfThenElseOp>
                                    <EQOp>
                                        <TermOp>
                                            identifier: operazione
                                        </TermOp>
                                        <TermOp>
                                            string_const: "divisione"
                                        </TermOp>
                                    </EQOp>
                                    <BodyOp>
                                        <AssignOp>
                                            identifier: result
                                            <TermOp>
                                                <CallOp>
                                                    identifier: divisione
                                                    <TermOp>
                                                        identifier: input1
                                                    </TermOp>
                                                    <TermOp>
                                                        identifier: input2
                                                    </TermOp>
                                                </CallOp>
                                            </TermOp>
                                        </AssignOp>
                                    </BodyOp>
                                    <BodyOp>
                                        <IfThenElseOp>
                                            <EQOp>
                                                <TermOp>
                                                    identifier: operazione
                                                </TermOp>
                                                <TermOp>
                                                    string_const: "moltiplicazione"
                                                </TermOp>
                                            </EQOp>
                                            <BodyOp>
                                                <AssignOp>
                                                    identifier: result
                                                    <TermOp>
                                                        <CallOp>
                                                            identifier: moltiplicazione
                                                            <TermOp>
                                                                identifier: input1
                                                            </TermOp>
                                                            <TermOp>
                                                                identifier: input2
                                                            </TermOp>
                                                        </CallOp>
                                                    </TermOp>
                                                </AssignOp>
                                            </BodyOp>
                                            <BodyOp>
                                                <IfThenElseOp>
                                                    <EQOp>
                                                        <TermOp>
                                                            identifier: operazione
                                                        </TermOp>
                                                        <TermOp>
                                                            string_const: "tutteleoperazioni"
                                                        </TermOp>
                                                    </EQOp>
                                                    <BodyOp>
                                                        <CallOp>
                                                            identifier: tutteleoperazioni
                                                            <TermOp>
                                                                identifier: input1
                                                            </TermOp>
                                                            <TermOp>
                                                                identifier: input2
                                                            </TermOp>
                                                            <TermOp>
                                                                identifier: res1
                                                            </TermOp>
                                                            <TermOp>
                                                                identifier: res2
                                                            </TermOp>
                                                            <TermOp>
                                                                identifier: res3
                                                            </TermOp>
                                                            <TermOp>
                                                                identifier: res4
                                                            </TermOp>
                                                        </CallOp>
                                                    </BodyOp>
                                                    <BodyOp>
                                                        <WriteOp>
                                                            <TermOp>
                                                                string_const: "Operazione non consentita"
                                                            </TermOp>
                                                        </WriteOp>
                                                    </BodyOp>
                                                </IfThenElseOp>
                                            </BodyOp>
                                        </IfThenElseOp>
                                    </BodyOp>
                                </IfThenElseOp>
                            </BodyOp>
                        </IfThenElseOp>
                    </BodyOp>
                </IfThenElseOp>
                <IfThenElseOp>
                    <NEOp>
                        <TermOp>
                            identifier: operazione
                        </TermOp>
                        <TermOp>
                            string_const: "tutteleoperazioni"
                        </TermOp>
                    </NEOp>
                    <BodyOp>
                        <WriteOp>
                            <TermOp>
                                string_const: "Il risultato è: "
                            </TermOp>
                            <TermOp>
                                identifier: result
                            </TermOp>
                        </WriteOp>
                    </BodyOp>
                    <BodyOp>
                        <WriteOp>
                            <TermOp>
                                <CallOp>
                                    identifier: stampa
                                    <AddOp>
                                        <TermOp>
                                            string_const: "I risultati delle 4 operazioni sono \n"
                                        </TermOp>
                                        <TermOp>
                                            string_const: "\n"
                                        </TermOp>
                                    </AddOp>
                                </CallOp>
                            </TermOp>
                        </WriteOp>
                    </BodyOp>
                </IfThenElseOp>
                <WriteOp>
                    <TermOp>
                        string_const: "Vuoi continuare? (1 yes/0 no): "
                    </TermOp>
                </WriteOp>
                <ReadOp>
                    identifier: answer
                </ReadOp>
                <IfThenElseOp>
                    <EQOp>
                        <TermOp>
                            identifier: answer
                        </TermOp>
                        <TermOp>
                            int_const: 1
                        </TermOp>
                    </EQOp>
                    <BodyOp>
                        <AssignOp>
                            identifier: flag
                            <TermOp>
                                true
                            </TermOp>
                        </AssignOp>
                    </BodyOp>
                    <BodyOp>
                        <AssignOp>
                            identifier: flag
                            <TermOp>
                                false
                            </TermOp>
                        </AssignOp>
                    </BodyOp>
                </IfThenElseOp>
            </BodyOp>
        </WhileOp>
    </BeginEndOp>
</ProgramOp>
